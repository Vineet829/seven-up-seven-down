{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Utility function to get token from localStorage\nconst getToken = () => localStorage.getItem('token');\nexport const fetchPointsById = createAsyncThunk('game/fetchPointsById', async ({\n  userId\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  try {\n    const response = await axios.get(`http://localhost:5000/api/users/${userId}/points`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data.points;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg) || 'Failed to fetch points');\n  }\n});\nexport const rollDice = createAsyncThunk('game/rollDice', async ({\n  betAmount,\n  betOption,\n  userId\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  try {\n    const response = await axios.post('http://localhost:5000/api/game/roll', {\n      betAmount,\n      betOption,\n      userId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.msg) || 'Failed to roll the dice');\n  }\n});\nexport const updatePoints = createAsyncThunk('game/updatePoints', async ({\n  userId,\n  points\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  try {\n    const response = await axios.put(`http://localhost:5000/api/users/${userId}/points`, {\n      points\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data.points;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.msg) || 'Failed to update points');\n  }\n});\nconst gameSlice = createSlice({\n  name: 'game',\n  initialState: {\n    points: null,\n    diceResult: null,\n    message: '',\n    betAmount: '',\n    betOption: '',\n    loading: false,\n    error: null\n  },\n  reducers: {\n    setBetAmount(state, action) {\n      state.betAmount = action.payload;\n    },\n    setBetOption(state, action) {\n      state.betOption = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchPointsById.fulfilled, (state, action) => {\n      state.points = action.payload;\n    }).addCase(fetchPointsById.rejected, (state, action) => {\n      state.error = action.payload;\n    }).addCase(rollDice.pending, state => {\n      state.loading = true;\n      state.diceResult = null;\n      state.message = '';\n      state.error = null;\n    }).addCase(rollDice.fulfilled, (state, action) => {\n      state.loading = false;\n      state.diceResult = action.payload;\n      state.points = action.payload.newPoints;\n      state.message = action.payload.message;\n    }).addCase(rollDice.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }).addCase(updatePoints.fulfilled, (state, action) => {\n      state.points = action.payload;\n    }).addCase(updatePoints.rejected, (state, action) => {\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  setBetAmount,\n  setBetOption\n} = gameSlice.actions;\nexport default gameSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getToken","localStorage","getItem","fetchPointsById","userId","rejectWithValue","token","response","get","headers","Authorization","data","points","error","_error$response","_error$response$data","msg","rollDice","betAmount","betOption","post","_error$response2","_error$response2$data","updatePoints","put","_error$response3","_error$response3$data","gameSlice","name","initialState","diceResult","message","loading","reducers","setBetAmount","state","action","payload","setBetOption","extraReducers","builder","addCase","fulfilled","rejected","pending","newPoints","actions","reducer"],"sources":["/home/vineet/seven-up-seven-down/client/src/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Utility function to get token from localStorage\nconst getToken = () => localStorage.getItem('token');\n\nexport const fetchPointsById = createAsyncThunk(\n  'game/fetchPointsById',\n  async ({ userId }, { rejectWithValue }) => {\n    const token = getToken();\n    try {\n      const response = await axios.get(`http://localhost:5000/api/users/${userId}/points`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data.points;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to fetch points');\n    }\n  }\n);\n\nexport const rollDice = createAsyncThunk(\n  'game/rollDice',\n  async ({ betAmount, betOption, userId }, { rejectWithValue }) => {\n    const token = getToken();\n    try {\n      const response = await axios.post(\n        'http://localhost:5000/api/game/roll',\n        { betAmount, betOption, userId },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to roll the dice');\n    }\n  }\n);\n\nexport const updatePoints = createAsyncThunk(\n  'game/updatePoints',\n  async ({ userId, points }, { rejectWithValue }) => {\n    const token = getToken();\n    try {\n      const response = await axios.put(`http://localhost:5000/api/users/${userId}/points`, { points }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data.points;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to update points');\n    }\n  }\n);\n\nconst gameSlice = createSlice({\n  name: 'game',\n  initialState: {\n    points: null,\n    diceResult: null,\n    message: '',\n    betAmount: '',\n    betOption: '',\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    setBetAmount(state, action) {\n      state.betAmount = action.payload;\n    },\n    setBetOption(state, action) {\n      state.betOption = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchPointsById.fulfilled, (state, action) => {\n        state.points = action.payload;\n      })\n      .addCase(fetchPointsById.rejected, (state, action) => {\n        state.error = action.payload;\n      })\n      .addCase(rollDice.pending, (state) => {\n        state.loading = true;\n        state.diceResult = null;\n        state.message = '';\n        state.error = null;\n      })\n      .addCase(rollDice.fulfilled, (state, action) => {\n        state.loading = false;\n        state.diceResult = action.payload;\n        state.points = action.payload.newPoints;\n        state.message = action.payload.message;\n      })\n      .addCase(rollDice.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n      .addCase(updatePoints.fulfilled, (state, action) => {\n        state.points = action.payload;\n      })\n      .addCase(updatePoints.rejected, (state, action) => {\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { setBetAmount, setBetOption } = gameSlice.actions;\n\nexport default gameSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}