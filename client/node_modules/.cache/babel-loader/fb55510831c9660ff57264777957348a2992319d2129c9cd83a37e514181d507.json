{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst getToken = () => localStorage.getItem('token');\nexport const fetchPointsById = createAsyncThunk('game/fetchPointsById', async ({\n  userId\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  console.log(token);\n  try {\n    const response = await axios.get(`https://vineetpersonal.site:5000/api/users/${userId}/points`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data.points;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg) || 'Failed to fetch points');\n  }\n});\nexport const rollDice = createAsyncThunk('game/rollDice', async ({\n  betAmount,\n  betOption,\n  userId\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  try {\n    const response = await axios.post('http://vineetpersonal.site:5000/api/game/roll', {\n      betAmount,\n      betOption,\n      userId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.msg) || 'Failed to roll the dice');\n  }\n});\nexport const updatePoints = createAsyncThunk('game/updatePoints', async ({\n  userId,\n  points\n}, {\n  rejectWithValue\n}) => {\n  const token = getToken();\n  try {\n    const response = await axios.put(`http://vineetpersonal.site:5000/api/users/${userId}/points`, {\n      points\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data.points;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    return rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.msg) || 'Failed to update points');\n  }\n});\nconst initialState = {\n  points: null,\n  diceResult: null,\n  message: '',\n  betAmount: '',\n  betOption: '',\n  loading: false,\n  error: null\n};\nconst gameSlice = createSlice({\n  name: 'game',\n  initialState,\n  reducers: {\n    setBetAmount(state, action) {\n      state.betAmount = action.payload;\n    },\n    setBetOption(state, action) {\n      state.betOption = action.payload;\n    },\n    resetGame(state) {\n      state.points = null;\n      state.diceResult = null;\n      state.message = '';\n      state.betAmount = '';\n      state.betOption = '';\n      state.loading = false;\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchPointsById.fulfilled, (state, action) => {\n      state.points = action.payload;\n    }).addCase(fetchPointsById.rejected, (state, action) => {\n      state.error = action.payload;\n    }).addCase(rollDice.pending, state => {\n      state.loading = true;\n      state.diceResult = null;\n      state.message = '';\n      state.error = null;\n    }).addCase(rollDice.fulfilled, (state, action) => {\n      state.loading = false;\n      state.diceResult = action.payload;\n      state.points = action.payload.newPoints;\n      state.message = action.payload.message;\n    }).addCase(rollDice.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    }).addCase(updatePoints.fulfilled, (state, action) => {\n      state.points = action.payload;\n    }).addCase(updatePoints.rejected, (state, action) => {\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  setBetAmount,\n  setBetOption,\n  resetGame\n} = gameSlice.actions;\nexport default gameSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getToken","localStorage","getItem","fetchPointsById","userId","rejectWithValue","token","console","log","response","get","headers","Authorization","data","points","error","_error$response","_error$response$data","msg","rollDice","betAmount","betOption","post","_error$response2","_error$response2$data","updatePoints","put","_error$response3","_error$response3$data","initialState","diceResult","message","loading","gameSlice","name","reducers","setBetAmount","state","action","payload","setBetOption","resetGame","extraReducers","builder","addCase","fulfilled","rejected","pending","newPoints","actions","reducer"],"sources":["/home/vineet/seven-up-seven-down/client/src/gameSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n\nconst getToken = () => localStorage.getItem('token');\n\nexport const fetchPointsById = createAsyncThunk(\n  'game/fetchPointsById',\n  async ({ userId }, { rejectWithValue }) => {\n    const token = getToken();\n    console.log(token)\n    try {\n      const response = await axios.get(`https://vineetpersonal.site:5000/api/users/${userId}/points`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data.points;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to fetch points');\n    }\n  }\n);\n\nexport const rollDice = createAsyncThunk(\n  'game/rollDice',\n  async ({ betAmount, betOption, userId }, { rejectWithValue }) => {\n    const token = getToken();\n    try {\n      const response = await axios.post(\n        'http://vineetpersonal.site:5000/api/game/roll',\n        { betAmount, betOption, userId },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      return response.data;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to roll the dice');\n    }\n  }\n);\n\nexport const updatePoints = createAsyncThunk(\n  'game/updatePoints',\n  async ({ userId, points }, { rejectWithValue }) => {\n    const token = getToken();\n    try {\n      const response = await axios.put(`http://vineetpersonal.site:5000/api/users/${userId}/points`, { points }, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      return response.data.points;\n    } catch (error) {\n      return rejectWithValue(error.response?.data?.msg || 'Failed to update points');\n    }\n  }\n);\n\nconst initialState = {\n  points: null,\n  diceResult: null,\n  message: '',\n  betAmount: '',\n  betOption: '',\n  loading: false,\n  error: null,\n};\n\nconst gameSlice = createSlice({\n  name: 'game',\n  initialState,\n  reducers: {\n    setBetAmount(state, action) {\n      state.betAmount = action.payload;\n    },\n    setBetOption(state, action) {\n      state.betOption = action.payload;\n    },\n    resetGame(state) {\n      state.points = null;\n      state.diceResult = null;\n      state.message = '';\n      state.betAmount = '';\n      state.betOption = '';\n      state.loading = false;\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchPointsById.fulfilled, (state, action) => {\n        state.points = action.payload;\n      })\n      .addCase(fetchPointsById.rejected, (state, action) => {\n        state.error = action.payload;\n      })\n      .addCase(rollDice.pending, (state) => {\n        state.loading = true;\n        state.diceResult = null;\n        state.message = '';\n        state.error = null;\n      })\n      .addCase(rollDice.fulfilled, (state, action) => {\n        state.loading = false;\n        state.diceResult = action.payload;\n        state.points = action.payload.newPoints;\n        state.message = action.payload.message;\n      })\n      .addCase(rollDice.rejected, (state, action) => {\n        state.loading = false;\n        state.error = action.payload;\n      })\n      .addCase(updatePoints.fulfilled, (state, action) => {\n        state.points = action.payload;\n      })\n      .addCase(updatePoints.rejected, (state, action) => {\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { setBetAmount, setBetOption, resetGame } = gameSlice.actions;\n\nexport default gameSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}